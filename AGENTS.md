# Функциональные требования (Next.js, без БД/сервера)

## 1) Объём MVP

* PWA-веб-приложение на Next.js: офлайн-режим (кеш урока), установка на устройство.
* Онбординг + плейсмент-тест → выбор стартового уровня.
* Дерево навыков: треки → модули → юниты → уроки → упражнения.
* Урок 3–7 мин: 8–12 заданий, мгновенный фидбек.
* Повторы (spaced repetition lite) и тренировка «слабых мест».
* Геймификация: XP, серия (streak), сердца, монеты, короны.
* Глоссарий и поиск.
* Локальный авторинг (черновой): собрать/просмотреть урок, импорт/экспорт JSON.

## 2) Роли (локальные)

* **Ученик (гость):** весь функционал; прогресс локально.
* **Автор (локально):** включаем режим авторинга в настройках.

> Роли «Учитель/Родитель» — вне MVP.

## 3) Контент и хранение (локально)

* Контент (треки/модули/юниты/уроки/упражнения/глоссарий) — **JSON-файлы** в проекте.
* Прогресс, инвентарь, streak, настройки — **LocalStorage**; кеш уроков/медиа — **Service Worker + Cache Storage**.
* Импорт/экспорт контента и прогресса — в/из JSON.

## 4) Типы упражнений (ИБ-ядро)

* **Phishing Inbox:** пометка писем «безопасно/подозрительно» + подсветка признаков.
* **URL Check:** сравнение видимого текста и реального href; решение «ок/опасно».
* **Password Builder:** ввод пароля; проверка длины/словарности/паттернов; оценка стойкости.
* **MFA Flow:** выбор фактора + шаг подтверждения (TOTP/approve).
* **Privacy Settings:** псевдо-профиль соцсети; выбор безопасных настроек.
* **HTTPS Chain:** сборка цепочки (браузер—сертификат—сервер); распознавание ошибок.
* **SQLi-Lite:** распознавание опасных шаблонов ввода; объяснение про prepared statements.
* **Incident Branching:** разветвлённый сценарий реагирования (изолировать, сообщить, восстановить).
* **Generic:** одиночный/множественный выбор, упорядочивание, истина/ложь, короткий ввод.
* Валидаторы — целиком на клиенте; объяснение при ошибке.

## 5) Геймификация и прогресс (локально)

* Начисление XP за задания; штраф за подсказки.
* Сердца (жизни) на урок; восстановление временем/повтором.
* Streak по дням; «заморозка» за монеты (локально).
* Короны — мастерство юнита (0–5).
* Локальные тосты/баннеры «Продолжи серию», без пушей.

## 6) Адаптивность и повторы

* Плейсмент-тест формирует стартовый юнит.
* Автовыбор следующих уроков по ошибкам/времени ответа.
* Очередь повторов из «слабых» упражнений; ежедневный «ревью» режим.

## 7) Поиск и глоссарий

* Поиск по названиям/тегам/формулировкам в загруженных JSON.
* Глоссарий: карточки терминов + мини-проверка (true/false).

## 8) Авторинг (локально, без сервера)

* Конструктор уроков из шаблонов упражнений.
* Превью «как ученик».
* Импорт/экспорт уроков/модулей/треков (JSON).

## 9) Маршруты (Next.js App Router)

* `/` — онбординг.
* `/onboarding` — цель дня, плейсмент-тест.
* `/learn` — дерево навыков.
* `/learn/[trackId]`, `/learn/[trackId]/[moduleId]`, `/learn/[trackId]/[moduleId]/[unitId]`.
* `/lesson/[lessonId]` — прохождение урока.
* `/review` — повторы/слабые места.
* `/glossary` — глоссарий + поиск.
* `/profile` — XP, streak, короны, инвентарь.
* `/settings` — язык/тема/вкл. авторинга.
* `/author` — список черновиков.
* `/author/lesson/new` и `/author/lesson/[id]` — конструктор/превью.

## 10) i18n и доступность

* Интерфейс с переключением языка (RU как базовый).
* ARIA-лейблы, клавиатурная навигация, фокус-стили.

## 11) PWA/офлайн-поведение

* Кеширование JSON урока и ассетов.
* Возможность завершить урок офлайн; результат сохраняется локально и помечается «синхронизирован» (без реальной отправки).

## 12) Отчётность (локальная)

* В профиле: график XP по дням, карта ошибок по тегам, список слабых типов.
* Выгрузка прогресса в JSON/CSV.

## 13) Ограничения безопасности в учебных симуляциях

* Все «опасные» темы (XSS/SQLi) — только как симуляции; ввод экранируется, код не исполняется, внешние запросы не выполняются.

